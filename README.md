# üìò CreON Backend

> API —Å–µ—Ä–≤—ñ—Å—É –¥–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –ø–æ—à—É–∫—É —ñ–¥–µ–π —ñ —Ä—ñ—à–µ–Ω—å –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É.

---

## üë§ –ê–≤—Ç–æ—Ä

* **–ü–Ü–ë**: –ü–∞–ª—ñ–π –û—Ä–µ—Å—Ç –ê–Ω–¥—Ä—ñ–π–æ–≤–∏—á
* **–ì—Ä—É–ø–∞**: –§–ï–Ü-42
* **–ö–µ—Ä—ñ–≤–Ω–∏–∫**: –°—Ç–∞—Ö—ñ—Ä–∞ –†–æ–º–∞–Ω –ô–æ—Å–∏–ø–æ–≤–∏—á, –¥–æ—Ü–µ–Ω—Ç
* **–î–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**: 01.06.2025

---

## üìå –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

* **–¢–∏–ø –ø—Ä–æ—î–∫—Ç—É**: –°–µ—Ä–≤–µ—Ä–Ω–∞ –ª–æ–≥—ñ–∫–∞ (Backend)
* **–ú–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è**: TypeScript
* **–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó**: Firebase Cloud Functions, Firebase Realtime Database, Cloud Storage, Pinecone, OpenAI API, Google Cloud Vision API

---

## üß† –û–ø–∏—Å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

* ‚òÅÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —É Firebase Storage
* üìù –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –æ–ø–∏—Å—ñ–≤ –∑–æ–±—Ä–∞–∂–µ–Ω—å (OpenAI GPT-4o)
* üìä –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏—Ö embedding-–≤–µ–∫—Ç–æ—Ä—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –æ–ø–∏—Å—ñ–≤ (textembedding3)
* üõ°Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –∑–æ–±—Ä–∞–∂–µ–Ω—å (Google Cloud Vision API, SafeSearch)
* üóÇÔ∏è –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö —É Firebase Realtime Database —Ç–∞ embedding-–≤–µ–∫—Ç–æ—Ä—ñ–≤ —É Pinecone DB
* üîó REST API –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –º–æ–±—ñ–ª—å–Ω–∏–º–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∞–º–∏ (iOS —Ç–∞ Android)
* üîç –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É

---

## üß± –û—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏ —Ç–∞ –º–æ–¥—É–ª—ñ

| –§–∞–π–ª / –ú–æ–¥—É–ª—å         | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                                                             |
| --------------------- | ----------------------------------------------------------------------- |
| `index.ts`            | –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è HTTP-—Ñ—É–Ω–∫—Ü—ñ–π                                  |
| `postLogic.ts`        | –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏ –∑ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è–º–∏                                            |
| `gptTagLogic.ts`      | –í–∑–∞—î–º–æ–¥—ñ—è –∑ OpenAI API (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–≥—ñ–≤)                                |
| `visionModeration.ts` | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–µ–∑–ø–µ—á–Ω–æ—Å—Ç—ñ –∫–æ–Ω—Ç–µ–Ω—Ç—É (Google API)                             |
| `userLogic.ts`        | –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏ –∑ –ø—Ä–æ—Ñ—ñ–ª—è–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤                                  |
| `commentsLogic.ts`    | –†–æ–±–æ—Ç–∞ –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏                                                    |
| `Firebase Secrets`    | –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è API-–∫–ª—é—á—ñ–≤ —É –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ —á–µ—Ä–µ–∑ Firebase CLI |

---

## ‚ñ∂Ô∏è –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è —ñ–∑ –∑–∞–ø—É—Å–∫—É

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤

* Node.js v20.x –∞–±–æ –≤–∏—â–µ
* Firebase CLI (`npm install -g firebase-tools`)

### 2. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

git clone https://github.com/orest-paliy/Creon-Backend.git


### 3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

npm install

### 4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—ñ–≤

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Firebase –ø—Ä–æ–µ–∫—Ç—É

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [Firebase Console](https://console.firebase.google.com/) —ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç.

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É Pinecone

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Pinecone](https://www.pinecone.io/) —Ç–∞ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤.
2. –û—Ç—Ä–∏–º–∞–π—Ç–µ API-–∫–ª—é—á Pinecone –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ –≤–∞—à–∏–º –ø—Ä–æ—î–∫—Ç–æ–º.

#### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Google Vision API

1. –ê–∫—Ç–∏–≤—É–π—Ç–µ [Google Cloud Vision API](https://console.cloud.google.com/apis/library/vision.googleapis.com) —É Google Cloud Console –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–æ–≥–æ Firebase –ø—Ä–æ—î–∫—Ç—É.

#### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è OpenAI API

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ [OpenAI API](https://platform.openai.com/api-keys) —Ç–∞ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π API-–∫–ª—é—á.

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è API-–∫–ª—é—á—ñ–≤

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ API-–∫–ª—é—á—ñ —á–µ—Ä–µ–∑ Firebase Secrets:
firebase functions:secrets:set OPENAI_KEY
firebase functions:secrets:set PINECONE_API_KEY

–£ –∫–æ–¥—ñ –¥–æ—Å—Ç—É–ø –¥–æ —Å–µ–∫—Ä–µ—Ç—ñ–≤ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `defineSecret()` —Ç–∞ `setSecret()`.

### 5. –î–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü—ñ–π

firebase deploy --only functions
–∞–±–æ firebase deploy --only functions:FUNCTION_NAME –¥–ª—è –¥–µ–ø–ª–æ—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó

---

## üîå API –ø—Ä–∏–∫–ª–∞–¥–∏

### üñºÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ–ø–∏—Å—É —ñ —Ç–µ–≥—ñ–≤

**POST** `/generate-description`

```json
{
  "imageUrl": "https://firebase.storage.com/image.png"
}
```

**Response:**

```json
{
  "description": "–î–µ—Ä–µ–≤‚Äô—è–Ω–∏–π –æ–ª—ñ–≤–µ—Ü—å —á–æ—Ä–Ω–æ–≥–æ –∫–æ–ª—å–æ—Ä—É –Ω–∞ –±—ñ–ª–æ–º—É –∞—Ä–∫—É—à—ñ."
}
```

### üîç –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫

**POST** `/search-similar`

```json
{
  "query": "–æ–ª—ñ–≤–µ—Ü—å –Ω–∞ –ø–∞–ø–µ—Ä—ñ",
  "limit": 10
}
```

**Response:**

```json
{
  "results": [
    { "id": "12345", "similarity": 0.95 },
    { "id": "67890", "similarity": 0.93 }
  ]
}
```

---

## üß™ –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø–æ—à–∏—Ä–µ–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º

| –ü—Ä–æ–±–ª–µ–º–∞                                                               | –†—ñ—à–µ–Ω–Ω—è                                                                                                                                                                                                    |
| ---------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| API –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó                                       | –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Firebase Secrets (—É –ø—Ä–æ–¥–∞–∫—à–Ω)                                                                                                                                          |
| –§—É–Ω–∫—Ü—ñ—ó –Ω–µ –¥–µ–ø–ª–æ—è—Ç—å—Å—è                                                  | –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Firebase —É —Ñ–∞–π–ª—ñ firebase.json                                                                                                                                                      |
| –ù–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É                                        | –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞–Ω Google Vision API —É –∫–æ–Ω—Å–æ–ª—ñ Google Cloud                                                                                                                                                    |
| API-–∫–ª—é—á—ñ OpenAI –∞–±–æ Pinecone –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞—é—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è–º–∏               | –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Å–µ–∫—Ä–µ—Ç–∏. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å —ñ–º–µ–Ω–∞ –∑–º—ñ–Ω–Ω–∏—Ö —É –∫–æ–¥—ñ —Ç–∏–º, —â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ —è–∫ —Å–µ–∫—Ä–µ—Ç–∏.                                                                         |
| –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ä–æ–∂–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∞–±–æ –ø–æ–º–∏–ª–∫–∏              | –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —ñ–Ω–¥–µ–∫—Å Pinecone –±—É–≤ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π, —ñ —â–æ API-–∫–ª—é—á Pinecone —î –¥—ñ–π—Å–Ω–∏–º. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –±—É–ª–∏ –¥–æ–¥–∞–Ω—ñ embedding-–≤–µ–∫—Ç–æ—Ä–∏ –¥–æ —ñ–Ω–¥–µ–∫—Å—É Pinecone –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å. |
| –§—É–Ω–∫—Ü—ñ—ó Firebase –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –∞–±–æ –≤–∏–¥–∞—é—Ç—å –ø–æ–º–∏–ª–∫–∏ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è | –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ Node.js –≤–µ—Ä—Å—ñ—ó 20.x –∞–±–æ –≤–∏—â–µ. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Cloud Functions —É Firebase Console –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ñ—à–∏—Ö –ø–æ–º–∏–ª–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.                                                |

---

## üßæ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞

* Firebase Functions [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://firebase.google.com/docs/functions)
* OpenAI [API docs](https://platform.openai.com/docs)
* Pinecone [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://www.pinecone.io/docs)
* Google Cloud Vision API [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://cloud.google.com/vision/docs)

---
